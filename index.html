<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="js/flexible.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/velocity.js"></script>
  <script src="js/velocity.ui.js"></script>
  <link rel="stylesheet/less" href="css/style.less">
  <script src="js/less.min.js"></script>
  <title>大家</title>
</head>

<body>
  <div class="cover">
    <div class="cover_text"></div>
    <div class="cover_clou1"></div>
    <div class="cover_clou2"></div>
    <div class="cover_clou3"></div>
    <div class="cover_clou4"></div>
  </div>
  <div class="wrap">
    <ul class="item_wrap">
      <li class="choose">
        <div class="txt"></div>
        <div class="btns">
          <a href="javascript:;" class="choose_btn boy" data-sex="0"></a>
          <a href="javascript:;" class="choose_btn girl" data-sex="1"></a>
        </div>
      </li>
      <li class="main">
        <div class="share_btn"></div>
        <div class="floor"></div>
        <div class="main-zhong"></div>
        <div class="main-zhi"></div>
        <div class="main-wen"></div>
        <div class="main-xing"></div>
        <div class="main-rui"></div>
        <div class="person"></div>
        <div class="table"></div>
        <div class="btns">
          <div class="btn zhong" data-daoju="zhong"></div>
          <div class="btn zhi" data-daoju="zhi"></div>
          <div class="btn wen" data-daoju="wen"></div>
          <div class="btn xing" data-daoju="xing"></div>
          <div class="btn rui" data-daoju="rui"></div>
          <div class="btn upgrade" data-daoju="renwu">
            <span class="jibie">公公</span>
          </div>
        </div>
        <div class="leaf1"></div>
        <div class="leaf2"></div>
        <div class="leaf3"></div>
      </li>
      <li class="answer">
        <div class="title">关于黄圣依和杨子的感情，以下哪种观 点没有在《大家》提起过？</div>
        <div class="result-options">
          <div class="opt">
            <span>黄圣依和杨子的关系可能一直会是 一个谜</span>
            <div class="animation-correct"></div>
            <div class="animation-wrong"></div>
          </div>
          <div class="opt">
            <span>黄圣依和杨子的关系可能一直会是 一个谜</span>
            <div class="animation-correct"></div>
            <div class="animation-wrong"></div>
          </div>
          <div class="opt">
            <span>黄圣依和杨子的关系可能一直会是 一个谜</span>
            <div class="animation-correct"></div>
            <div class="animation-wrong"></div>
          </div>
        </div>
        <div class="num-count"> <span class="currentNum">1</span>/<span class="totalNum">3</span></div>
        <div class="result">
          <div class="result-container">
            <div class="result-title">解锁成功</div>
            <div class="result-flag"></div>
            <div class="result-text">获得猫咪!</div>
          </div>
        </div>
        <div class="result-wrong">
          <div class="result-container">
            <div class="result-title">解锁失败</div>
            <div class="result-text">您与道具擦身而过，再试一次吧!</div>
          </div>
        </div>
        <div class="result-person">
          <div class="result-person-container">
            <div class="result-person-title">答对4题</div>
            <div class="result-person-subtitle">恭喜你，人物形象升级为 </div>
            <div class="result-person-text">贵妃</div>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div class="loading">
    <div class="text">建议在WIFI下观看，正在加载中...</div>
    <div class="loading_cloud"></div>
    <div class="progress"></div>
    <div class="copyright">出品：XX公司出品</div>
  </div>
  <script>
    var pics = [
      "css/answer_allopen_bg.png", "css/answer_bg.png", "css/answer_cat.png", "css/answer_correct.png", "css/answer_failed_bg.png", "css/answer_rui.png", "css/answer_success_bg.png", "css/answer_wen.png", "css/answer_wrong.png",
      "css/answer_zhi.png", "css/answer_zhong.png", "css/btn-boy.png", "css/btn-girl.png", "css/choose_bg.png", "css/choose_boy.png", "css/choose_girl.png", "css/choose-bg.png", "css/choose-text.png", "css/cover_bg.png", "css/cover_clou1.png",
      "css/cover_clou2.png", "css/cover_clou3.png", "css/cover_clou4.png", "css/cover_text.png", "css/cover-bg.png", "css/cover-text.png", "css/floor.jpg", "css/leaf1.png", "css/leaf2.png", "css/leaf3.png", "css/loading.jpg", "css/loading_bg.png",
      "css/loading_cloud.png", "css/logo.png", "css/mainscene_bg.png", "css/mainscene_rui.png", "css/mainscene_rui_bi.png", "css/mainscene_table.png", "css/mainscene_tips1.png", "css/mainscene_tips2.png", "css/mainscene_tips3.png",
      "css/mainscene_tips4.png", "css/mainscene_upgrade.png", "css/mainscene_wen.png", "css/mainscene_wen_zhi.png", "css/mainscene_xing.png", "css/mainscene_xing_cat.png", "css/mainscene_zhi.png", "css/mainscene_zhi_hua.png",
      "css/mainscene_zhong.png", "css/mainscene_zhong_bian.png", "css/me_bottom.png", "css/me_close.png", "css/memorial_1.png", "css/memorial_2.png", "css/memorial_3.png", "css/memorial_4.png", "css/memorial_bg.png", "css/memorial_up_btn.png",
      "css/ms_chakanzouzhang.png", "css/ms_taijian.png", "css/pop_renwu_bg.png", "css/share.jpg", "css/share.png", "css/share_btn.png", "css/upgrade_btn.png"
    ];

    var count = 0;
    var percent = 0;
    var len = pics.length;
    for (var i = 0; i < len; i++) {
      var img = new Image();
      img.src = pics[i];
      img.onload = function() {
        count++;
        percent = Math.floor(count / len * 100) + '%';
        $('.progress').text(percent)
        if (i == count) {
          $('.loading').hide();
          $('.cover').show();
          setTimeout(function() {
            $('.cover_clou1').addClass('cover_clou1_am');
            $('.cover_clou2').addClass('cover_clou2_am');
            $('.cover_clou3').addClass('cover_clou3_am');
            $('.cover_clou4').addClass('cover_clou4_am');
            setTimeout(function() {
              $('.cover').fadeOut();
              $('.choose').show();
            }, 2000)
          }, 8000);
          $('.wrap').show();
        }
      }
    }

    $('.choose_btn').on('click', function() {
      if($(this).data('sex') == 0){
        boy_girl = 0;
      }else {
        boy_girl = 1;
        $('.person').attr('class','person girls_1');
        $('.jibie').text('丫头')
      }
      $('.wrap').css('transform', 'translateY(' + -$(window).height() + 'px)')
    });

    var data = {
      daoju: {
        zhong: [{
            question: '1、如果《大家》的文章每被阅读一次，就给你一元钱，你现在是个什么级别的富人？',
            options: {
              A: 'A、亿万富翁',
              B: 'B、百万富翁',
              C: 'C、穷光蛋'
            },
            correct: 'A'
          },
          {
            question: '2、以下哪一组人名都是《大家》作者？',
            options: {
              A: 'A、闫黄、红佟佟、小绿桑',
              B: 'B、闫绿、黄佟佟、小红桑',
              C: 'C、闫红、黄佟佟、小绿桑'
            },
            correct: 'C'
          },
          {
            question: '3、以下哪一个观点是《大家》没推荐过的？',
            options: {
              A: 'A、中国人至少还要忍受30年雾霾',
              B: 'B、雾霾越严重，越要发展大城市',
              C: 'C、雾霾是工业污染的产物'
            },
            correct: 'C'
          }
        ],
        zhi: [{
            question: '1、NASH是什么？',
            options: {
              A: 'A、一个数学家的名字',
              B: 'B、几个对博弈论最有贡献的人的名字合写',
              C: 'C、A+B'
            },
            correct: 'C'
          },
          {
            question: '2、以下哪条内容是可信的？',
            options: {
              A: 'A、吃碘盐可以预防核辐射',
              B: 'B、白壳鸡蛋更有营养',
              C: 'C、早上身高比晚上更高一些'
            },
            correct: 'C'
          },
          {
            question: '3、某编辑一月约稿量超量50%，二月约稿量上升了50%，三月放松警惕，业绩下滑50%，请回答：第三个月编辑约稿量考核如何？',
            options: {
              A: 'A、高于要求水平，超过很多(50%以上)',
              B: 'B、高于要求水平，超过一点(50%以下)',
              C: 'C、低于要求水平，差一点点(50%以下)'
            },
            correct: 'B'
          }
        ],
        wen: [{
            question: '1、以下文章标题，哪个被读者点击次数更多？',
            options: {
              A: 'A、《这世上唯一能让窦唯潦倒的人》',
              B: 'B、《你无法证明自己不是人渣》',
              C: 'C、《崔永元用诡辩“战胜”科学》'
            },
            correct: 'A'
          },
          {
            question: '2、以下文章，哪个被转发次数更多？',
            options: {
              A: 'A、《留美需要多长时间的准备？》',
              B: 'B、《今日何人才配做我们的老师》',
              C: 'C、《父子之间，很多话不知如何开口》'
            },
            correct: 'A'
          },
          {
            question: '3、郭靖为什么能追到黄蓉？',
            options: {
              A: 'A、因为郭靖土豪',
              B: 'B、因为郭靖豪爽、大气不滥情',
              C: 'C、因为郭靖是蒙古高官'
            },
            correct: 'B'
          }
        ],
        xing: [{
            question: '1、根据《大家》作者的观点，以下哪个是错误的？',
            options: {
              A: 'A、《红楼梦》里面贾瑞勾引王熙凤是因为他觉得“已婚女人很寂寞”',
              B: 'B、名人公布恋情时，获利的首先是借机打广告的企业',
              C: 'C、同性结婚在美国是违法的'
            },
            correct: 'C'
          },
          {
            question: '2、关于黄圣依和杨子的感情，以下哪种观点没有在《大家》提起过？',
            options: {
              A: 'A、黄圣依和杨子的关系可能一直会是一个谜',
              B: 'B、黄圣依和杨子很般配',
              C: 'C、杨子并非为了孩子而承认和黄圣依的关系'
            },
            correct: 'B'
          },
          {
            question: '3、以下哪条不是大家作者发表过的婚姻观',
            options: {
              A: 'A、不要结婚',
              B: 'B、婚姻很昂贵',
              C: 'C、婚姻不该用“狠”来维持'
            },
            correct: 'A'
          }
        ],
        rui: [{
            question: '1、以下电视剧女主角谁更“玛丽苏”？',
            options: {
              A: 'A、花千骨',
              B: 'B、何以笙箫默',
              C: 'C、武媚娘传奇'
            },
            correct: 'A'
          },
          {
            question: '2、2015年上半年以下哪个明星的情感问题没有在《大家》栏目中被提到？',
            options: {
              A: 'A、黄圣依',
              B: 'B、古天乐',
              C: 'C、刘翔'
            },
            correct: 'B'
          },
          {
            question: '3、以下关于日本的描述哪一条是不对的？',
            options: {
              A: 'A、大多数日本人整容是为了让自己变得更普通',
              B: 'B、大多数日本人不知道天皇是做什么的',
              C: 'C、大多数日本人不喜欢吃日本料理'
            },
            correct: 'C'
          }
        ],
        renwu: [{
            question: '1：《大家》目前有一位主编的名字叫做“jiajia”，请问对应的中文是哪两个字？',
            options: {
              A: 'A、贾佳',
              B: 'B、贾葭',
              C: 'C、贾嘉'
            },
            correct: 'C'
          },
          {
            question: '2：填空题，下面句子中应该填入哪个词组：《大家》女编辑都是__常给大家带来欢乐',
            options: {
              A: 'A、女神经',
              B: 'B、女神，经',
              C: 'C、女，神经'
            },
            correct: 'B'
          },
          {
            question: '3：以下哪一位不是《大家》作者',
            options: {
              A: 'A、刘波',
              B: 'B、刘洪',
              C: 'C、刘海'
            },
            correct: 'C'
          },
          {
            question: '4：以下哪一组《大家》作者都是女的？',
            options: {
              A: 'A、唐映红、席越、师北宸、小绿桑',
              B: 'B、席越、易小荷、陈思呈、侯虹斌',
              C: 'C、朱天衣、云也退、毛利、唐映红'
            },
            correct: 'B'
          },
          {
            question: '5：《大家》特别的牛的作者王欣，他的每一篇文章在微信客户端阅读量都超过10万，他的网名叫什么？',
            options: {
              A: 'A、反内裤阵地',
              B: 'B、反裤衩阵地',
              C: 'C、反优衣库阵地'
            },
            correct: 'B'
          },
          {
            question: '6：杨早老师曾在一篇文章中预测过100年后，中国三位文学家会被称为“自贡三杰”，请问这三杰都是谁？',
            options: {
              A: 'A、易小荷、李静睿、恐龙化石',
              B: 'B、郭敬明、饶雪漫、周小平',
              C: 'C、郭敬明、冷吃兔、饶雪漫'
            },
            correct: 'B'
          },
          {
            question: '7：《大家》作者毛利曾点评：“一部热衷讲道理的电影，打斗再精彩，演员再好看，所有人都恨不得快点结束。”她在说哪部片子：',
            options: {
              A: 'A、大圣归来',
              B: 'B、道士下山',
              C: 'C、聂隐娘'
            },
            correct: 'B'
          },

          {
            question: '8：《大家书架》每天推荐一本“你不看就OUT了”的好书，请问以下哪本书没有在这个栏目里推荐过的：',
            options: {
              A: 'A、《拉布拉多鸭的诅咒》',
              B: 'B、《没有女人的男人们》',
              C: 'C、《三生三世 十里桃花》'
            },
            correct: 'C'
          },
          {
            question: '9：《大家》编辑金凤每天白天要写400字的文章，晚上，她会删掉300个字，问：金凤写一篇1000字的文章要多少天？',
            options: {
              A: 'A、10天',
              B: 'B、8天',
              C: 'C、7天'
            },
            correct: 'C'
          },
          {
            question: '10：小远和刀哥约见作者，距离为10，小远步速2，作者3，刀哥4，刀哥遇作者后回头，遇小远后又回头，如此反复，问：三人相遇时，刀哥共走多远？',
            options: {
              A: 'A、10公里',
              B: 'B、8公里',
              C: 'C、7公里'
            },
            correct: 'B'
          }
          //renwu
        ]
      }

    }
    var map_opt = {
      '0': 'A',
      '1': 'B',
      '2': 'C'
    };
    var map_result_text = {
      'zhong': '忠匾',
      'zhi': '屏风',
      'wen': '宣纸',
      'xing': '小猫',
      'rui': '锐笔'
    }
    var boy_girl = 0;
    var map_renwu_text = {
        'boys':{
            '0':{'name':'公公','enname':'taijian'},
            '1':{'name':'衙役','enname':'yayi'},
            '2':{'name':'县令','enname':'xianling'},
            '3':{'name':'宰相','enname':'zaixiang'},
            '4':{'name':'皇帝','enname':'huangdi'}
        },
        'girls':{
            '0':{'name':'丫头','enname':'yatou'},
            '1':{'name':'小姐','enname':'xiaojie'},
            '2':{'name':'小主','enname':'xiaozhu'},
            '3':{'name':'贵妃','enname':'guifei'},
            '4':{'name':'女王','enname':'nvwang'}
        }
    }
    var map_sex = {'0': 'boys', '1': 'girls'}
    var dati_count = 0;
    var corrent_count = 0;
    var isFinished = false;
    var resultData = {};
    function initData(daoju) {
      if (isFinished) return false;
      var question = [];
      resultData = data.daoju;
      question = resultData[daoju];
      var len = question.length;
      if (len - 1 === dati_count) isFinished = true;
      $('.title').text(resultData[daoju][dati_count]['question']);
      $('.opt').each(function(index, item) {
        $(this).find('span').text(resultData[daoju][dati_count]['options'][map_opt[index]])
      });
      $('.result-options').data('correct', resultData[daoju][dati_count]['correct'])
      $('.answer').data('daoju', daoju);
      $('.currentNum').text(dati_count + 1);
      $('.totalNum').text(len);
    }
    $('.btn').on('click', function() {
      if ($(this).hasClass('current')) return false;
      var daoju = $(this).data('daoju');
      dati_count = 0;
      isFinished = false;
      corrent_count = 0;
      initData(daoju);
      $('.wrap').css('transform', 'translateY(' + -$(window).height() * 2 + 'px)')
    });

    function success(daoju) {
      $('.result-flag').attr('class', 'result-flag result-flag-' + daoju);
      $('.result .result-text').text('获得' + map_result_text[daoju])
      $('.result').velocity('fadeIn', {
        complete: function() {
          $(this).velocity('fadeOut', {
            complete: function() {
              $('.wrap').css('transform', 'translateY(' + -$(window).height() + 'px)');
              $('.main-' + daoju).velocity('fadeIn', {
                delay: 1000
              });
            },
            delay: 3000
          })
        },
        duration: 1000
      })
    }

    function fail() {
      $('.result-wrong').velocity('fadeIn', {
        complete: function() {
          $(this).velocity('fadeOut', {
            complete: function() {
              $('.wrap').css('transform', 'translateY(' + -$(window).height() + 'px)')
            },
            delay: 3000
          })
        },
        duration: 1000
      })
    }

    function showRight(daoju, $t) {
      $t.find('.animation-correct').velocity('fadeIn', {
        complete: function() {
          var $t = $(this);
          lock = false;
          $t.velocity('fadeOut', {
            complete: function() {
              if (!isFinished) {
                dati_count++;
                initData(daoju);
              }
            },
            delay: 500
          });
        },
        duration: 2000
      })
    }

    function showWrong(daoju, $t) {
      $t.find('.animation-wrong').velocity('fadeIn', {
        complete: function() {
          var $t = $(this);
          lock = false;
          $t.velocity('fadeOut', {
            complete: function() {
              if (!isFinished) {
                dati_count++;
                initData(daoju);
              }
            },
            delay: 500
          });

        },
        duration: 2000
      })
    }

    function correctResult($t, daoju) {
      corrent_count++;
      showRight(daoju, $t);
      if (isFinished && daoju != 'renwu') {
        if (corrent_count >= resultData[daoju].length / 2) {
          $('.' + daoju).addClass('current');
          setTimeout(function() {
            success(daoju);
          }, 500)
        } else {
          setTimeout(function() {
            fail();
          }, 500)

        }
      }else if(isFinished && daoju == 'renwu'){
        showPersonResult()
      }
    }
    function showPersonResult(){
      var sex = boy_girl;
      switch (corrent_count) {
        case 1:
        case 2:
          $('.result-person-title').text('答对' + corrent_count + '题');
          $('.result-person-subtitle').text('恭喜你，人物形象升级为')
          $('.result-person-text').text(map_renwu_text[map_sex[sex]]['0']['name']);
          $('.jibie').text(map_renwu_text[map_sex[sex]]['0']['name'])
          $('.result-person').velocity('fadeIn', {
            complete: function() {
              $(this).velocity('fadeOut', {
                complete: function() {
                  $('.wrap').css('transform', 'translateY(' + -$(window).height() + 'px)');
                  $('.person').attr('class', 'person ' + map_sex[sex] + '_1');
                },
                delay: 3000
              })
            },
            duration: 1000
          })
          break;
        case 3:
        case 4:
          $('.result-person-title').text('答对' + corrent_count + '题');
          $('.result-person-subtitle').text('恭喜你，人物形象升级为')
          $('.result-person-text').text(map_renwu_text[map_sex[sex]]['1']['name']);
          $('.jibie').text(map_renwu_text[map_sex[sex]]['1']['name'])
          $('.result-person').velocity('fadeIn', {
            complete: function() {
              $(this).velocity('fadeOut', {
                complete: function() {
                  $('.wrap').css('transform', 'translateY(' + -$(window).height() + 'px)');
                  $('.person').attr('class', 'person ' + map_sex[sex] + '_2');
                },
                delay: 3000
              })
            },
            duration: 1000
          });
          break;
        case 5:
        case 6:
          $('.result-person-title').text('答对' + corrent_count + '题');
          $('.result-person-subtitle').text('恭喜你，人物形象升级为')
          $('.result-person-text').text(map_renwu_text[map_sex[sex]]['2']['name']);
          $('.jibie').text(map_renwu_text[map_sex[sex]]['2']['name'])
          $('.result-person').velocity('fadeIn', {
            complete: function() {
              $(this).velocity('fadeOut', {
                complete: function() {
                  $('.wrap').css('transform', 'translateY(' + -$(window).height() + 'px)');
                  $('.person').attr('class', 'person ' + map_sex[sex] + '_3');
                },
                delay: 3000
              })
            },
            duration: 1000
          })
          break;
        case 7:
        case 8:
          $('.result-person-title').text('答对' + corrent_count + '题');
          $('.result-person-subtitle').text('恭喜你，人物形象升级为')
          $('.result-person-text').text(map_renwu_text[map_sex[sex]]['3']['name']);
          $('.jibie').text(map_renwu_text[map_sex[sex]]['3']['name'])
          $('.result-person').velocity('fadeIn', {
            complete: function() {
              $(this).velocity('fadeOut', {
                complete: function() {
                  $('.wrap').css('transform', 'translateY(' + -$(window).height() + 'px)');
                  $('.person').attr('class', 'person ' + map_sex[sex] + '_4');
                },
                delay: 3000
              })
            },
            duration: 1000
          })
          break;
      case 9:
      case 10:
        $('.result-person-title').text('答对' + corrent_count + '题');
        $('.result-person-subtitle').text('恭喜你，人物形象升级为')
        $('.result-person-text').text(map_renwu_text[map_sex[sex]]['4']['name']);
        $('.jibie').text(map_renwu_text[map_sex[sex]]['4']['name'])
        $('.result-person').velocity('fadeIn', {
          complete: function() {
            $(this).velocity('fadeOut', {
              complete: function() {
                $('.wrap').css('transform', 'translateY(' + -$(window).height() + 'px)');
                $('.person').attr('class', 'person ' + map_sex[sex] + '_5');
              },
              delay: 3000
            })
          },
          duration: 1000
        })
        break;
      }

    }
    function wrongResult($t, daoju) {
      showWrong(daoju, $t);
      if (isFinished && daoju != 'renwu') {
        if (corrent_count < resultData[daoju].length / 2) {
          setTimeout(function() {
            fail();
          }, 500)
        } else {
          $('.' + daoju).addClass('current');
          setTimeout(function() {
            success(daoju);
          }, 500)
        }
      }else if(isFinished && daoju == 'renwu'){
        showPersonResult()
      }
    }
    var lock = false;
    $('.opt').on('click', function() {
      if(lock) return ;
      lock = true;
      var $t = $(this);
      var daoju = $t.closest('.answer').data('daoju');
      var correct = $t.closest('.result-options').data('correct');
      var choose_val = map_opt[$t.index()];
      if (choose_val == correct) {
        correctResult($t, daoju)
      } else {
        wrongResult($t, daoju);
      }

    })
  </script>
</body>

</html>
